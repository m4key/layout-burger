"use strict";var accordionTeam=function(){document.querySelectorAll(".accordion__link").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".accordion__item.is-active");t&&(t.querySelector(".accordion__desc").style.height="0px",t.classList.remove("is-active"));if(!t||t.querySelector(".accordion__link")!==e.target){var n=e.target.closest(".accordion__item");n.classList.add("is-active");var o=n.querySelector(".accordion__desc");o.style.height=o.scrollHeight+"px"}})})};accordionTeam();var vertAccordion=function(){document.querySelectorAll(".vert-accordion__link").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".vert-accordion__item.vert-accordion__item--active");t&&(t.querySelector(".vert-accordion__desc").style.width="0px",t.classList.remove("vert-accordion__item--active"));if(!t||t.querySelector(".vert-accordion__link")!==e.target){var n=e.target.closest(".vert-accordion__item");n.classList.remove("hidden"),n.classList.add("vert-accordion__item--active"),n.querySelector(".vert-accordion__desc").style.width=function(){var e=window.innerWidth,t=document.querySelectorAll(".vert-accordion__link"),n=e-parseFloat(getComputedStyle(t[0]).width)*t.length;return 550<n?550:n}()+"px"}})})};vertAccordion();var overlay=function(){var r=document.querySelector("body"),i=document.createElement("a");i.classList.add("modal-review__close"),i.setAttribute("href","#");var a=function(e){document.querySelector(e).classList.remove("active"),r.classList.remove("locked")};return{open:function(t,e){var n=document.querySelector(t),o=n.querySelector(".modal-review__inner");n.addEventListener("click",function(e){e.preventDefault(),e.target===n&&a(t)}),document.addEventListener("keydown",function(e){27==e.keyCode&&a(t)}),e&&(o.innerHTML=e,o.appendChild(i)),i.addEventListener("click",function(e){e.preventDefault(),a(t)}),n.classList.add("active"),r.classList.add("locked")},close:a,setContent:function(e,t){var n=document.querySelector(e).querySelector(".modal-review__inner");t&&(n.innerHTML=t,n.appendChild(i))}}}(),ajaxForm=function(e){var t=new FormData;t.append("name",e.elements.name.value),t.append("phone",e.elements.phone.value),t.append("comment",e.elements.comment.value),t.append("to","amakeikin@yandex.ru");var n=new XMLHttpRequest;return n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail/"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t),n},submitform=function(e){e.preventDefault();var t=e.target,n=ajaxForm(t);n.addEventListener("load",function(){if(400<=n.status){overlay.open("#modal-review","".concat("Ошибка соединения с сервером, попробуйте позже",". Ошибка ").concat(n.status))}else{var e=n.response.message;overlay.open("#modal-review",e)}})},myForm=document.querySelector("#main-form");myForm.addEventListener("submit",submitform);var reviewOpen=function(t){var n=document.querySelector("#button");document.querySelector(".reviews__list").addEventListener("click",function(e){e.preventDefault(),e.target.className===n.className&&overlay.open("#modal-review",t)}),t=document.querySelector("#overlay").innerHTML},content=document.querySelector("#overlay").innerHTML;reviewOpen(content);var hamburger=function(e){function t(e){e.preventDefault(),r.classList.toggle("popup-menu--active"),o.classList.toggle("hamburger-menu-link--active"),document.body.classList.toggle("lock")}function n(e){e.preventDefault(),"popup-menu__link"===e.target.className&&(r.classList.remove("popup-menu--active"),o.classList.remove("hamburger-menu-link--active"),document.body.classList.remove("lock"))}var o=document.querySelector(e.button),r=document.querySelector(e.menu),i=document.querySelector(".popup-menu__list");return{init:function(){o.addEventListener("click",t),i.addEventListener("click",n)}}};hamburger({button:".hamburger-menu-link",menu:".popup-menu"}).init(),ymaps.ready(init);var placemarks=[{latitude:59.96956006,longitude:30.3114485,hintContent:'<div class="map__hint">ул. Литераторов, д. 19</div>',balloonContent:['<div class="map__balloon">','<img class="map__burger-img" src="./icons/map-marker.svg" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: ул. Литераторов, д. 19. ","Работаем с 10:00 до 20:00","</div>"]},{latitude:59.93995106,longitude:30.250812,hintContent:'<div class="map__hint">Малый проспект В О, д 64</div>',balloonContent:['<div class="map__balloon">','<img class="map__burger-img" src="./icons/map-marker.svg" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: Малый проспект В О, д 64. ","Работаем с 10:00 до 20:00","</div>"]},{latitude:59.92953756,longitude:30.339997,hintContent:'<div class="map__hint">наб. реки Фонтанки, д. 56</div>',balloonContent:['<div class="map__balloon">','<img class="map__burger-img" src="./icons/map-marker.svg" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: наб. реки Фонтанки, д. 56. ","Работаем с 10:00 до 20:00","</div>"]},{latitude:59.92651036,longitude:30.41366645,hintContent:'<div class="map__hint"> Новочеркасский проспект, д.47 к.1 </div>',balloonContent:['<div class="map__balloon">','<img class="map__burger-img" src="./icons/map-marker.svg" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу:Новочеркасский проспект, д.47 к.1. ","Работаем с 10:00 до 20:00","</div>"]}],geoObjects=[];function init(){var n=new ymaps.Map("map",{center:[59.93848,30.31248],zoom:13,controls:["zoomControl"],behaviors:["drag"]});placemarks.forEach(function(e){var t=new ymaps.Placemark([e.latitude,e.longitude],{hintContent:e.hintContent,balloonContent:e.balloonContent.join("")},{iconLayout:"default#image",iconImageHref:"./icons/map-marker.svg",iconImageSize:[46,57],iconOffset:[-23,-57]});n.geoObjects.add(t)})}var checkMobile=function(){var e=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Opera Mobile|Kindle|Windows Phone|PSP|AvantGo|Atomic Web Browser|Blazer|Chrome Mobile|Dolphin|Dolfin|Doris|GO Browser|Jasmine|MicroB|Mobile Firefox|Mobile Safari|Mobile Silk|Motorola Internet Browser|NetFront|NineSky|Nokia Web Browser|Obigo|Openwave Mobile Browser|Palm Pre web browser|Polaris|PS Vita browser|Puffin|QQbrowser|SEMC Browser|Skyfire|Tear|TeaShark|UC Browser|uZard Web|wOSBrowser|Yandex.Browser mobile/i.test(navigator.userAgent)&&(e=!0),e},OnePageScroll=function(n){var e,o,r,i,a,c,l=0,t=document.querySelector(".content"),s=document.querySelectorAll(".section").length,u=document.querySelectorAll("["+n.attribute+"]"),d=!1,v=function(n){if(!d&&0<=n&&n<s){d=!0;var e=-100*(l=n)+"%";t.style.transform="translateY(".concat(e,")"),t.style.webkitTransform="translateY(".concat(e,")"),setTimeout(function(){d=!1;for(var e=document.querySelectorAll(".section-nav__item"),t=0;t<e.length;t++)t!==n?e[t].classList.remove("section-nav__item--active"):e[t].classList.add("section-nav__item--active")},1e3)}};document.addEventListener("keydown",function(e){switch(e.keyCode){case 40:v(l+1);break;case 38:v(l-1)}}),u.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=parseInt(e.target.getAttribute(n.attribute));0<=t||(t=parseInt(e.currentTarget.getAttribute(n.attribute))),v(t)})}),document.addEventListener("wheel",function(e){var t=e.deltaY;v(0<t?l+1:l-1)},"touchmove",function(e){return e.preventDefault()}),checkMobile&&((e=t).addEventListener("touchstart",function(e){var t=e.changedTouches[0];o=t.pageX,r=t.pageY,c=(new Date).getTime()}),e.addEventListener("touchmove",function(e){return e.preventDefault()}),e.addEventListener("touchend",function(e){var t=e.changedTouches[0];i=t.pageX-o,a=t.pageY-r,(new Date).getTime()-c<=1e3&&150<=Math.abs(a)&&Math.abs(i)<=200&&(swipedir=v(a<0?l+1:l-1))}))};OnePageScroll({content:"content",section:"section",sideNavigation:"section-nav__item",attribute:"data-scroll-to"}),window.onload=function(){var e=document.querySelector("#player");e.addEventListener("click",l);for(var t=document.querySelectorAll(".play"),n=0;n<t.length;n++)t[n].addEventListener("click",l);document.querySelector(".sound__mic").addEventListener("click",function(){0===e.volume?(e.volume=soundLevel,r.value=10*soundLevel):(soundLevel=e.volume,e.volume=0,r.value=0)});var o=document.querySelector(".duration__range");o.addEventListener("mousedown",function(){e.pause(),clearInterval(i)}),o.addEventListener("click",function(){e.paused?e.play():e.pause();e.currentTime=o.value,i=setInterval(s,1e3/66)}),o.min=0,o.value=0;var r=document.querySelector(".sound__range");r.addEventListener("mouseup",function(){e.volume=r.value/10,console.log(e.volume)}),r.min=0,r.max=10,r.value=r.max;var i,a=document.querySelector(".video__player-pic"),c=document.querySelector(".duration__play");function l(){a.classList.toggle("video__player-pic--active"),c.classList.toggle("duration__play--active"),o.max=e.duration,e.paused?(e.play(),i=setInterval(s,1e3/66)):(e.pause(),clearInterval(i))}function s(){o.value=e.currentTime}e.addEventListener("ended",function(){a.classList.toggle("video__player-pic--active"),c.classList.toggle("duration__play--active"),e.currentTime=0})};var slide=function(){var o=document.querySelector(".slider__button-prev"),r=document.querySelector(".slider__button-next"),i=document.querySelector(".slider__list"),a=getComputedStyle(i),c=!0,l=parseInt(a.width);window.addEventListener("resize",function(){currentRight=0,i.style.right=currentRight,l=parseInt(a.width)},!0);function e(n){n.addEventListener("click",function(e){if(e.preventDefault(),c){c=!1;var t=parseInt(a.right);t<(s-1)*l&&n==r?i.style.right=t+l+"px":(s-1)*l<=t&&n==r&&(i.style.right=t-(s-1)*l+"px"),0<t&&n==o?i.style.right=t-l+"px":t<=0&&n==o&&(i.style.right=t+(s-1)*l+"px"),setTimeout(function(){c=!0},500)}})}var s=i.children.length;return{init:function(){e(r),e(o)}}}();slide.init();var Ingredients=function(){var e=document.querySelectorAll(".slider__list"),n=document.querySelector(".composition__dropdown-close");e.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".composition--active")?t.classList.remove("composition--active"):t.classList.add("composition--active")}),n.addEventListener("click",function(e){e.preventDefault(),"composition"===e.target.className&&t.classList.remove("composition--active")})})};Ingredients();